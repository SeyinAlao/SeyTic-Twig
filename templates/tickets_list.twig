<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Your Tickets - SeyTic</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body class="bg-gradient-to-b from-slate-50 to-white min-h-screen">

<nav class="bg-white border-b border-slate-200">
  <div class="max-w-[1440px] mx-auto px-6 py-4 flex justify-between items-center">
    <div class="flex items-center space-x-2">
      <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">
        <i data-lucide="ticket" class="text-white w-5 h-5"></i>
      </div>
      <span class="text-slate-900 font-semibold">SeyTic</span>
    </div>

    <div class="flex items-center gap-6">
      <a href="/dashboard.php" class="text-slate-700 hover:text-slate-900">Dashboard</a>
      <a href="/tickets.php" class="text-blue-600 font-medium">Tickets</a>
      <a href="/logout.php" class="px-3 py-1 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-100">Logout</a>
    </div>
  </div>
</nav>

<div class="max-w-[1440px] mx-auto px-6 py-12">

  <div class="flex justify-between items-center mb-8">
    <h1 class="text-3xl font-semibold text-slate-900">Your Tickets</h1>
    <a href="/tickets.php?create=true" onclick="window.location='/tickets.php';" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg">
      + Create Ticket
    </a>
  </div>

  {% if success == 'created' %}
    <div class="mb-4 p-3 bg-green-100 text-green-700 rounded-lg">Ticket created successfully!</div>
  {% endif %}
  {% if success == 'updated' %}
    <div class="mb-4 p-3 bg-blue-100 text-blue-700 rounded-lg">Ticket updated successfully!</div>
  {% endif %}
  {% if success == 'deleted' %}
    <div class="mb-4 p-3 bg-red-100 text-red-700 rounded-lg">Ticket deleted.</div>
  {% endif %}

  {% if tickets|length == 0 %}
    <p class="text-slate-600">No tickets yet.</p>
  {% else %}
    <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
      {% for t in tickets %}
        <div class="p-6 bg-white border border-slate-200 rounded-xl shadow-sm">

          <div class="flex justify-between items-center mb-2">
            <h3 class="text-lg font-semibold text-slate-800">{{ t.title }}</h3>

            {% set color = t.status == 'open' ? 'green' : (t.status == 'in_progress' ? 'amber' : 'gray') %}
            <span class="px-2 py-1 text-sm rounded-lg bg-{{ color }}-100 text-{{ color }}-700">
              {{ t.status|capitalize }}
            </span>
          </div>

          <p class="text-slate-600 text-sm mb-4">{{ t.description ?: 'No description provided.' }}</p>

          <div class="flex gap-3">
            <a href="/tickets.php?edit={{ t.id }}" class="text-blue-600 hover:underline">Edit</a>
            <a href="/tickets.php?delete={{ t.id }}" class="text-red-600 hover:underline" onclick="return confirm('Delete this ticket?');">Delete</a>
          </div>

        </div>
      {% endfor %}
    </div>
  {% endif %}
</div>

<script>lucide.createIcons()</script>
</body>
</html>
